var L=Object.defineProperty;var M=(o,n,e)=>n in o?L(o,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[n]=e;var c=(o,n,e)=>(M(o,typeof n!="symbol"?n+"":n,e),e);import{_ as k,o as y,c as D,a as r,e as R,t as d,m as x,w as F,v as V,q as S,n as E,F as g,d as f,l as N,p as $,g as A,r as G,b as B}from"./index-CYKQ7qNE.js";class C{constructor(n,e,a,s,l,i=0,u=!0){c(this,"title","Unnamed");c(this,"studentDay",1);c(this,"teacherDay",1);c(this,"backColor","White");c(this,"fontColor","Black");c(this,"isTermStart",0);c(this,"shouldExport",!0);this.title=n,this.studentDay=e,this.teacherDay=a,this.backColor=s,this.fontColor=l,this.isTermStart=i,this.shouldExport=u}get styleset(){return"background-color:"+this.backColor+"; color: "+this.fontColor+";"}}class w{constructor(){c(this,"thisDate");c(this,"dayType",new C("Normal",1,1,"white","black",0,!1));c(this,"termEvent",0);c(this,"notes","");c(this,"teacherDayCount",1);c(this,"studentDayCount",1)}static FromJson(n){console.log(n);const e=new w;e.thisDate=new Date(n.thisDate);const a=n.dayType;return e.dayType=new C(a.title,a.studentDay,a.teacherDay,a.backColor,a.fontColor,a.isTermStart,a.shouldExport),e.termEvent=a.termEvent,e.notes=n.notes,e.teacherDayCount=a.teacherDayCount,e.studentDayCount=a.studentDayCount,e.countStudentDays(),e.countTeacherDays(),e}static Generate(n,e,a){const s=new w;return s.thisDate=n,s.notes=a,(s.thisDate.getDay()==0||s.thisDate.getDay()==6)&&(s.dayType=new C("Weekend",0,0,"white","black",0,!1)),s.countTeacherDays(),s.countStudentDays(),s}addNote(n){this.notes.push(n)}countStudentDays(){this.dayType<1?this.studentDayCount=1:this.studentDayCount=0}countTeacherDays(){this.dayType<=3?this.teacherDayCount=1:this.teacherDayCount=0}setType(n){this.dayType=n,this.countTeacherDays(),this.countStudentDays()}}class T{constructor(){c(this,"days",[null,null,null,null,null,null,null]);c(this,"startDate");c(this,"endDate")}static FromJson(n){const e=new T;e.startDate=new Date(n.startDate),e.endDate=new Date(n.endDate);for(var a=0;a<e.days.length;a++){const s=n.days[a];s!=null&&(e.days[a]=w.FromJson(s))}return e}static Generate(n){const e=new T;var a=n.getMonth();e.startDate=n;for(var s=n;e.days[s.getDay()]=w.Generate(new Date(s),0,""),e.endDate=new Date(s),!(s.getDay()==6||(s=new Date(s.setDate(s.getDate()+1)),s.getMonth()!=a)););return e}get studentCount(){for(var n=0,e=0;e<this.days.length;e++){const a=this.days[e];a!=null&&(n+=a.dayType.studentDay)}return n}get teacherCount(){for(var n=0,e=0;e<this.days.length;e++){const a=this.days[e];a!=null&&(n+=a.dayType.teacherDay)}return n}}class v{constructor(){c(this,"months",["January","February","March","April","May","June","July","August","September","October","November","December"]);c(this,"weeks",[]);c(this,"monthNum");c(this,"startDate");c(this,"endDate")}static FromJson(n){const e=new v;e.startDate=n.startDate,e.endDate=n.endDate,e.monthNum=n.monthNum;for(var a=0;a<n.weeks.length;a++){const s=n.weeks[a];e.weeks.push(T.FromJson(s))}return e}static Generate(n){const e=new v;e.startDate=n;var a=n,s=!0;for(e.monthNum=n.getMonth();s;){const l=T.Generate(a);e.weeks.push(l),a=new Date(l.endDate.setDate(l.endDate.getDate()+1)),a.getMonth()!=e.monthNum&&(s=!1)}return e.endDate=new Date(a.setDate(a.getDate()-1)),e}get monthName(){return this.months[this.monthNum]}get studentDayCount(){for(var n=0,e=0;e<this.weeks.length;e++)n=n+this.weeks[e].studentCount;return n}get teacherDayCount(){for(var n=0,e=0;e<this.weeks.length;e++)n+=this.weeks[e].teacherCount;return n}}class p{constructor(){c(this,"name");c(this,"startDate");c(this,"endDate");c(this,"months",[])}static fromJson(n){const e=new p;e.name=n.name,e.startDate=new Date(n.startDate),e.endDate=new Date(n.endDate);for(var a=0;a<n.months.length;a++){const s=n.months[a],l=v.FromJson(s);e.months.push(l)}return e}static Generate(n,e,a){const s=new p;n>e&&(t=n,n=e,e=t),s.startDate=n,s.endDate=e,s.name=a;for(var l=n,i=-1;l<=e;)if(l.getMonth()!=i){const u=v.Generate(l);s.months.push(u),l=u.endDate,l=new Date(l.setDate(l.getDate()+1))}return s}get teacherDayCount(){for(var n=0,e=0;e<this.months.length;e++)n+=this.months[e].teacherDayCount;return n}get studentDayCount(){for(var n=0,e=0;e<this.months.length;e++)n+=this.months[e].studentDayCount;return n}get termCounts(){for(var n=[],e=-1,a=0;a<this.months.length;a++){const i=this.months[a];for(var s=0;s<i.weeks.length;s++){const u=i.weeks[s];for(var l=0;l<u.days.length;l++){const h=u.days[l];h!=null&&(h.dayType.isTermStart==1&&(n.push(0),e++),e>=0&&(n[e]+=h.dayType.studentDay))}}}return n}makeICal(){for(var n=this.getDateString(new Date),e=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//mclainonline.com/schoolCal/${this.name}
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:${this.name}
X-WR-CALDESK:${this.startDate.toLocaleDateString()} - ${this.endDate.toLocaleDateString()}
`,a=0;a<this.months.length;a++){const i=this.months[a];for(var s=0;s<i.weeks.length;s++){const u=i.weeks[s];for(var l=0;l<u.days.length;l++){const h=u.days[l];if(h!=null&&h.dayType.shouldExport!=!1){const m=this.getDateString(h.thisDate),b=`BEGIN:VEVENT
UID:${Date.now()}${m}calendarmakerzz@mclainonline.com
DTSTAMP:${n}
CREATED:${n}
LAST-MODIFIED:${n}
DTSTART;VALUE=DATE:${m}
DTEND;VALUE=DATE:${m}
SUMMARY:${h.dayType.title}(s:${h.dayType.studentDay})(t:${h.dayType.teacherDay})
TRANSP:TRANSPARENT
CATEGORIES:${h.dayType.title}
CLASS:PUBLIC
END:VEVENT
`;e=e+b}}}}return e=e+"END:VCALENDAR",console.log(e),e=this.replaceNewlinesWithCRLF(e),e}replaceNewlinesWithCRLF(n){return n.replace(/\n/g,`\r
`)}getDateString(n){console.log(n);var e=n.getFullYear().toString(),a=(n.getMonth()+1).toString();a<10&&(a="0"+a);var s=n.getDate().toString();s<10&&(s="0"+s);var l=e.concat("",a);return l=l.concat("",s),l=l.concat("","T070000Z"),console.log(l),l}}const J={key:0,class:"none"},U={class:"date"},W={key:0,class:"termStart"},O={class:"type"},P={class:"studentCount",tooltip:"Student days"},Y={class:"teacherCount",tooltip:"Teacher days"},q={__name:"elDate",props:{calDate:w,tool:C},emits:[{eyeDropper:C}],setup(o,{emit:n}){const e=o,a=n;function s(){e.calDate.setType(e.tool)}function l(u){u.preventDefault(),a("eyeDropper",e.calDate.dayType)}function i(){console.log("got it")}return(u,h)=>o.calDate==null?(y(),D("td",J)):(y(),D("td",{key:1,style:E(o.calDate.dayType.styleset),onClick:h[2]||(h[2]=m=>s()),onContextmenu:S(l,["right"])},[r("p",U,[R(d(o.calDate.thisDate.getDate())+" ",1),o.calDate.dayType.isTermStart==1?(y(),D("span",W,"*")):x("",!0)]),r("p",O,d(o.calDate.dayType.title),1),F(r("input",{onClick:h[0]||(h[0]=S(m=>i(),["stop"])),type:"text",class:"dayNotes","onUpdate:modelValue":h[1]||(h[1]=m=>o.calDate.notes=m)},null,512),[[V,o.calDate.notes]]),r("p",P,d(o.calDate.dayType.studentDay),1),r("p",Y,d(o.calDate.dayType.teacherDay),1)],36))}},z=k(q,[["__scopeId","data-v-e9f0ddd6"]]),H={class:"days dayCount"},X={class:"days teacherCount"},K={__name:"elWeek",props:{week:T,tool:C,required:!1},setup(o){return(n,e)=>(y(),D("tr",null,[(y(!0),D(g,null,f(o.week.days,a=>(y(),N(z,{calDate:a,tool:o.tool},null,8,["calDate","tool"]))),256)),r("td",H,d(o.week.studentCount),1),r("td",X,d(o.week.teacherCount),1)]))}},Z=k(K,[["__scopeId","data-v-3dde554d"]]),I=o=>($("data-v-6e2b833e"),o=o(),A(),o),Q=I(()=>r("hr",null,null,-1)),_=I(()=>r("tr",null,[r("th",null,"Sunday"),r("th",null,"Monday"),r("th",null,"Tuesday"),r("th",null,"Wednesday"),r("th",null,"Thursday"),r("th",null,"Friday"),r("th",null,"Saturday"),r("th",{class:"studentCount"},"Student Days"),r("th",{class:"teachercount"},"Teacher Days")],-1)),j={__name:"elMonth",props:{m:v,tool:C,required:!0},setup(o){return(n,e)=>(y(),D(g,null,[Q,r("h3",null,d(o.m.monthName),1),r("p",null,"Students: "+d(o.m.studentDayCount)+" Teachers: "+d(o.m.teacherDayCount),1),r("table",null,[_,(y(!0),D(g,null,f(o.m.weeks,a=>(y(),N(Z,{week:a,tool:o.tool},null,8,["week","tool"]))),256))])],64))}},tt=k(j,[["__scopeId","data-v-6e2b833e"]]),et=o=>($("data-v-43c1bb3e"),o=o(),A(),o),nt={class:"summary"},at={class:"dayCount"},st={class:"termCount"},ot=et(()=>r("h3",null,"Student days by Term: ",-1)),lt=["onClick"],rt={__name:"elCalendar",props:{cal:p,tools:[]},setup(o){function n(l){s.value=l}function e(){var l=a.cal.makeICal();const i="schoolCalendar.ical";var u=document.createElement("a");u.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),u.setAttribute("download",i),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u)}var a=o;const s=G(a.tools[0]);return(l,i)=>(y(),D(g,null,[r("header",null,[r("h1",null,d(o.cal.name),1),r("h3",null,d(o.cal.startDate.toLocaleString("default",{month:"long"}))+", "+d(o.cal.startDate.getFullYear())+" - "+d(o.cal.endDate.toLocaleString("default",{month:"long"}))+", "+d(o.cal.endDate.getFullYear()),1),r("nav",null,[r("button",{onClick:i[0]||(i[0]=u=>e())},"Get iCal")]),r("div",nt,[r("div",at,[r("h4",null,"Student Days: "+d(o.cal.studentDayCount)+"    TeacherDays: "+d(o.cal.teacherDayCount),1)]),r("div",st,[ot,r("ul",null,[(y(!0),D(g,null,f(o.cal.termCounts,(u,h)=>(y(),D("li",null,"T"+d(h+1)+": "+d(u),1))),256))])])]),r("nav",null,[(y(!0),D(g,null,f(o.tools,u=>(y(),D("span",{class:"toolButton",style:E(u.styleset),onClick:h=>n(u)},d(u.title),13,lt))),256))])]),r("main",null,[(y(!0),D(g,null,f(o.cal.months,u=>(y(),D("div",null,[B(tt,{m:u,tool:s.value},null,8,["m","tool"])]))),256))])],64))}},ht=k(rt,[["__scopeId","data-v-43c1bb3e"]]);export{p as C,C as D,ht as e};
